{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.includes\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _default = {\n  /**\n   * Appends a number to a component.key to keep it unique\n   *\n   * @param {Object} form\n   *   The components parent form.\n   * @param {Object} component\n   *   The component to uniquify\n   */\n  uniquify: function uniquify(container, component) {\n    var changed = false;\n    var formKeys = {};\n    (0, _utils.eachComponent)(container, function (comp) {\n      formKeys[comp.key] = true;\n\n      if (['address', 'container', 'datagrid', 'editgrid', 'dynamicWizard', 'tree'].includes(comp.type) || comp.tree || comp.arrayTree) {\n        return true;\n      }\n    }, true); // Recurse into all child components.\n\n    (0, _utils.eachComponent)([component], function (component) {\n      // Skip key uniquification if this component doesn't have a key.\n      if (!component.key) {\n        return;\n      }\n\n      var newKey = (0, _utils.uniqueKey)(formKeys, component.key);\n\n      if (newKey !== component.key) {\n        component.key = newKey;\n        changed = true;\n      }\n\n      formKeys[newKey] = true;\n\n      if (['address', 'container', 'datagrid', 'editgrid', 'dynamicWizard', 'tree'].includes(component.type) || component.tree || component.arrayTree) {\n        return true;\n      }\n    }, true);\n    return changed;\n  },\n  additionalShortcuts: {\n    button: ['Enter', 'Esc']\n  },\n  getAlphaShortcuts: function getAlphaShortcuts() {\n    return _lodash.default.range('A'.charCodeAt(), 'Z'.charCodeAt() + 1).map(function (charCode) {\n      return String.fromCharCode(charCode);\n    });\n  },\n  getAdditionalShortcuts: function getAdditionalShortcuts(type) {\n    return this.additionalShortcuts[type] || [];\n  },\n  getBindedShortcuts: function getBindedShortcuts(components, input) {\n    var result = [];\n    (0, _utils.eachComponent)(components, function (component) {\n      if (component === input) {\n        return;\n      }\n\n      if (component.shortcut) {\n        result.push(component.shortcut);\n      }\n\n      if (component.values) {\n        component.values.forEach(function (value) {\n          if (value.shortcut) {\n            result.push(value.shortcut);\n          }\n        });\n      }\n    }, true);\n    return result;\n  },\n  getAvailableShortcuts: function getAvailableShortcuts(form, component) {\n    if (!component) {\n      return [];\n    }\n\n    return [''].concat(_lodash.default.difference(this.getAlphaShortcuts().concat(this.getAdditionalShortcuts(component.type)), this.getBindedShortcuts(form.components, component))).map(function (shortcut) {\n      return {\n        label: shortcut,\n        value: shortcut\n      };\n    });\n  }\n};\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}